"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8395],{8395:(O,u,s)=>{s.r(u),s.d(u,{DetailsPageModule:()=>b});var g=s(6814),p=s(95),a=s(8602),d=s(2692),m=s(5861),t=s(9212),h=s(8662),M=s(9862),f=s(7413),v=s(9145),P=s(7382),Z=s(7513),A=s(8285);const y=[{path:"",component:(()=>{var i;class r{constructor(e,o,n,l,C,T,L){this.geolocation=e,this.http=o,this.nativeGeocoder=n,this.mapsService=l,this.callNumber=C,this.emailComposer=T,this.inAppBrowser=L,this.listhotel=[],this.latitude=0,this.longitude=0,this.options={timeout:1e4,enableHighAccuracy:!0,maximumAge:3600},this.nativeGeocoderOptions={useLocale:!0,maxResults:5},this.listLat=[],this.listLong=[]}ngOnInit(){var e=this;return(0,m.Z)(function*(){let o=localStorage.getItem("hotels");o&&(e.places=JSON.parse(o)),e.mapsService.initMap("bingMap","Apw2frPNDQwenaJt-Qwt5nDdvYBw_wtG0r6PVoFydMmn_o4uMNjCN_4UMzJZow0w"),e.currentPosition=yield e.mapsService.getPosition(),e.AutorLocation=yield e.mapsService.getAutour(),e.mapsService.centerMap(e.currentPosition),e.mapsService.AutourMap(e.AutorLocation),e.mapsService.addMarker(e.currentPosition,"Ma position"),e.mapsService.addMarker2(e.AutorLocation,"AutorLocation"),e.getAutourdemoi(),e.calculateAndDisplayRoute()})()}appel(){console.log(this.number),this.callNumber.callNumber("this.places.properties.datasource.raw.phone",!0).then(e=>{console.log("Launched dialer!",e)}).catch(e=>{console.log("Error launching dialer",e)})}mail(){this.emailComposer.open({to:"this.places.properties.datasource.raw.email",subject:"Sujet de l'e-mail",body:"Message",isHtml:!0})}openWebsite(){this.inAppBrowser.create("this.places.properties.datasource.raw.email","_blank")}getCurrentCoordinates(){this.geolocation.getCurrentPosition().then(e=>{console.log(e),this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,this.getAddress(this.latitude,this.longitude);const o={latitude:e.coords.latitude,longitude:e.coords.longitude};console.log("Get location"),this.mapsService.centerMap(o),this.mapsService.addMarker(new Microsoft.Maps.Location(o.latitude,o.longitude),"Ma Position")}).catch(e=>{console.log("Error getting location",e)})}calculateAndDisplayRoute(){const e=this.mapsService.getMap();if(e&&Microsoft.Maps.Directions&&Microsoft.Maps.Directions.DirectionsManager){const o=new Microsoft.Maps.Directions.DirectionsManager(e),n=new Microsoft.Maps.Directions.Waypoint({location:new Microsoft.Maps.Location(this.currentPosition.latitude,this.currentPosition.longitude)}),l=new Microsoft.Maps.Directions.Waypoint({location:new Microsoft.Maps.Location(40.7128,-74.006)});o.addWaypoint(n),o.addWaypoint(l),o.calculateDirections()}else console.error("Erreur lors du calcul de 'itin\xe9raire : DirectionsManager non disponible.")}getAddress(e,o){this.nativeGeocoder.reverseGeocode(e,o,this.nativeGeocoderOptions).then(n=>{this.address=this.pretifyAddress(n[0]),console.log("Get Adress")}).catch(n=>{alert("Error getting location"+JSON.stringify(n))})}pretifyAddress(e){let o=[],n="";for(let l in e)o.push(e[l]);o.reverse();for(let l in o)o[l].length&&(n+=o[l]+", ");return e.slice(0,-2)}getAutourdemoi(){this.geolocation.getCurrentPosition().then(e=>{console.log(e),this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,this.getAddress(this.latitude,this.longitude),console.log({latitude:e.coords.latitude,longitude:e.coords.longitude});let n=localStorage.getItem("hotels");n&&(this.places=JSON.parse(n)),console.log(this.places.features),console.log(this.places.geometry.coordinates[1]),this.name=this.places.categories,this.listLat=this.places.geometry.coordinates[1],this.listLong=this.places.geometry.coordinates[0],this.name=this.places.properties.name,console.log(this.listLong,this.listLat),this.mapsService.centerMap(this.AutorLocation),this.mapsService.addMarker2(new Microsoft.Maps.Location(this.listLat,this.listLong),this.name)})}}return(i=r).\u0275fac=function(e){return new(e||i)(t.Y36(h.b),t.Y36(M.eN),t.Y36(f.d),t.Y36(v.Q),t.Y36(P.X),t.Y36(Z.w),t.Y36(A.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-details"]],decls:40,vars:6,consts:[[3,"translucent"],["slot","start"],["defaulthref","accueil"],[3,"fullscreen"],["src","assets/images/plage.jpg"],[1,"label"],["name","bed-outline"],["name","location-outline"],["name","star-outline"],[1,"menu"],[1,"menuId"],[3,"click"],["name","globe-outline"],["name","call-outline"],["name","mail-outline"],["id","bingMap",2,"height","100%"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.qZA()()(),t.TgZ(6,"ion-content",3)(7,"div"),t._UZ(8,"img",4),t.qZA(),t.TgZ(9,"div")(10,"ion-label",5)(11,"h2"),t._uU(12),t._UZ(13,"ion-icon",6),t.qZA(),t.TgZ(14,"p"),t._UZ(15,"ion-icon",7),t._uU(16),t.qZA(),t.TgZ(17,"p"),t._uU(18),t._UZ(19,"ion-icon",8),t.qZA()()(),t.TgZ(20,"div",9)(21,"div",10)(22,"ion-item",11),t.NdJ("click",function(){return o.openWebsite()}),t.TgZ(23,"ion-label",11),t.NdJ("click",function(){return o.openWebsite()}),t._UZ(24,"ion-icon",12),t.TgZ(25,"p"),t._uU(26,"Vist the website "),t.qZA()()()(),t.TgZ(27,"div",10)(28,"ion-item",11),t.NdJ("click",function(){return o.appel()}),t.TgZ(29,"ion-label",11),t.NdJ("click",function(){return o.appel()}),t._UZ(30,"ion-icon",13),t.TgZ(31,"p"),t._uU(32,"Call"),t.qZA()()()(),t.TgZ(33,"div",10)(34,"ion-item",11),t.NdJ("click",function(){return o.mail()}),t.TgZ(35,"ion-label",11),t.NdJ("click",function(){return o.mail()}),t._UZ(36,"ion-icon",14),t.TgZ(37,"p"),t._uU(38,"Email"),t.qZA()()()()(),t._UZ(39,"div",15),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(5),t.Oqu(o.places.properties.name),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(6),t.Oqu(o.places.properties.name),t.xp6(4),t.hij(" ",o.places.properties.formatted,""),t.xp6(2),t.hij("",o.places.properties.datasource.raw.stars," "))},dependencies:[a.Sm,a.W2,a.Gu,a.gu,a.Ie,a.Q$,a.wd,a.sr,a.oU],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]{background:#848FF2}.label[_ngcontent-%COMP%]{padding-left:20px}ion-label[_ngcontent-%COMP%]{padding-left:30px}ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:25px;margin-left:10px}ion-icon[_ngcontent-%COMP%]{color:#6874e1}.menu[_ngcontent-%COMP%]{font-size:15px;display:flex;width:100%;height:auto;justify-content:space-around;align-items:center;padding-top:15px;border-bottom:1px solid #ccc}.menu[_ngcontent-%COMP%]   .menuId[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.menu[_ngcontent-%COMP%]   .menuId[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px;color:red;vertical-align:middle}p[_ngcontent-%COMP%]{font-size:15px;margin-left:10px}"]}),r})()}];let D=(()=>{var i;class r{}return(i=r).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.Bz.forChild(y),d.Bz]}),r})(),b=(()=>{var i;class r{}return(i=r).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,p.u5,a.Pc,D]}),r})()}}]);