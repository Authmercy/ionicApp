"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8395],{8395:(U,g,n)=>{n.r(g),n.d(g,{DetailsPageModule:()=>x});var m=n(6814),h=n(95),l=n(6728),p=n(2692),f=n(5861),t=n(9212),M=n(8662),v=n(9862),P=n(7413),Z=n(9145),y=n(7382),A=n(7513),C=n(8285);const D=[{path:"",component:(()=>{var i;class c{constructor(e,o,a,s,u,d,S){this.geolocation=e,this.http=o,this.nativeGeocoder=a,this.mapsService=s,this.callNumber=u,this.emailComposer=d,this.inAppBrowser=S,this.listhotel=[],this.latitude=0,this.longitude=0,this.nativeGeocoderOptions={useLocale:!0,maxResults:5},this.listLat=[],this.listLong=[]}ngOnInit(){var e=this;return(0,f.Z)(function*(){e.mapsService.initMap("bingMap","Apw2frPNDQwenaJt-Qwt5nDdvYBw_wtG0r6PVoFydMmn_o4uMNjCN_4UMzJZow0w"),e.currentPosition=yield e.mapsService.getPosition(),e.AutorLocation=yield e.mapsService.getAutour(),e.mapsService.centerMap(e.currentPosition),e.mapsService.AutourMap(e.AutorLocation),e.mapsService.addMarker(e.currentPosition,"Ma position"),e.getAutourdemoi();let o=localStorage.getItem("hotels");o&&(e.places=JSON.parse(o))})()}appel(){this.callNumber.callNumber("this.places.datasource.raw.contact:phone",!0).then(e=>{console.log("Launched dialer!",e)}).catch(e=>{console.log("Error launching dialer",e)})}mail(){this.emailComposer.open({to:"this.places.datasource.raw.contact:email",subject:"Sujet de l'e-mail",body:"Message",isHtml:!0})}getCurrentCoordinates(){this.geolocation.getCurrentPosition().then(e=>{console.log(e),this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,this.getAddress(this.latitude,this.longitude);const o={latitude:e.coords.latitude,longitude:e.coords.longitude};console.log("Get location"),this.mapsService.centerMap(o),this.mapsService.addMarker(new Microsoft.Maps.Location(o.latitude,o.longitude),"Ma Position")}).catch(e=>{console.log("Error getting location",e)})}getAddress(e,o){this.nativeGeocoder.reverseGeocode(e,o,this.nativeGeocoderOptions).then(a=>{this.address=this.pretifyAddress(a[0]),console.log("Get Adress")}).catch(a=>{alert("Error getting location"+JSON.stringify(a))})}pretifyAddress(e){let o=[],a="";for(let s in e)o.push(e[s]);o.reverse();for(let s in o)o[s].length&&(a+=o[s]+", ");return e.slice(0,-2)}getMap(){return this.map}getAutourdemoi(){this.geolocation.getCurrentPosition().then(e=>{console.log(e),this.latitude=e.coords.latitude,this.longitude=e.coords.longitude,this.getAddress(this.latitude,this.longitude),console.log({latitude:e.coords.latitude,longitude:e.coords.longitude}),this.listLat=this.places.feature.geometry.coordinates[1],this.listLong=this.places.features.geometry.coordinates[0];const a=this.places.features.geometry.coordinates;this.mapsService.centerMap(this.AutorLocation),this.mapsService.addMarker2(new Microsoft.Maps.Location(this.listLat,this.listLong),this.name),console.log(a);const s=new Microsoft.Maps.Directions.DirectionsManager(this.map),u=new Microsoft.Maps.Directions.Waypoint(this.latitude),d=new Microsoft.Maps.Directions.Waypoint(this.latitude);s.calculateDirections(),s.addWaypoint(u,0),s.addWaypoint(d,1),s.calculateDirections()})}}return(i=c).\u0275fac=function(e){return new(e||i)(t.Y36(M.b),t.Y36(v.eN),t.Y36(P.d),t.Y36(Z.Q),t.Y36(y.X),t.Y36(A.w),t.Y36(C.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-details"]],decls:39,vars:6,consts:[[3,"translucent"],["slot","start"],["defaulthref","accueil"],[3,"fullscreen"],["src","assets/images/plage.jpg"],[1,"label"],["name","bed-outline"],["name","location-outline"],["name","star-outline"],[1,"menu"],[1,"menuId"],["href","places.datasource.raw.website"],["name","globe-outline"],[3,"click"],["name","call-outline"],["name","mail-outline"],["id","bingMap",2,"height","100%"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.qZA()()(),t.TgZ(6,"ion-content",3)(7,"div"),t._UZ(8,"img",4),t.qZA(),t.TgZ(9,"div")(10,"ion-label",5)(11,"h2"),t._uU(12),t._UZ(13,"ion-icon",6),t.qZA(),t.TgZ(14,"p"),t._UZ(15,"ion-icon",7),t._uU(16),t.qZA(),t.TgZ(17,"p"),t._uU(18),t._UZ(19,"ion-icon",8),t.qZA()()(),t.TgZ(20,"div",9)(21,"div",10)(22,"ion-item")(23,"a",11),t._UZ(24,"ion-icon",12),t.qZA(),t.TgZ(25,"p"),t._uU(26,"Vist the website "),t.qZA()()(),t.TgZ(27,"div",10)(28,"ion-item",13),t.NdJ("click",function(){return o.appel()}),t._UZ(29,"ion-icon",14),t.TgZ(30,"p"),t._uU(31,"Call"),t.qZA()()(),t.TgZ(32,"div",10)(33,"ion-item",13),t.NdJ("click",function(){return o.mail()}),t._UZ(34,"ion-icon",15),t.TgZ(35,"p"),t._uU(36,"Email"),t.qZA()()()(),t.TgZ(37,"div"),t._UZ(38,"div",16),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(5),t.Oqu(o.places.name),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(6),t.Oqu(o.places.name),t.xp6(4),t.hij(" ",o.places.formatted,""),t.xp6(2),t.hij("",o.places.datasource.raw.stars," "))},dependencies:[l.Sm,l.W2,l.Gu,l.gu,l.Ie,l.Q$,l.wd,l.sr,l.oU],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]{background:#848FF2}.label[_ngcontent-%COMP%]{padding-left:20px}ion-label[_ngcontent-%COMP%]{padding-left:30px}ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:25px;margin-left:10px}ion-icon[_ngcontent-%COMP%]{color:#6874e1}.menu[_ngcontent-%COMP%]{font-size:15px;display:flex;width:100%;height:auto;justify-content:space-around;align-items:center;padding-top:15px;border-bottom:1px solid #ccc}.menu[_ngcontent-%COMP%]   .menuId[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.menu[_ngcontent-%COMP%]   .menuId[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px;color:red;vertical-align:middle}p[_ngcontent-%COMP%]{font-size:15px;margin-left:10px}"]}),c})()}];let O=(()=>{var i;class c{}return(i=c).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(D),p.Bz]}),c})(),x=(()=>{var i;class c{}return(i=c).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez,h.u5,l.Pc,O]}),c})()}}]);